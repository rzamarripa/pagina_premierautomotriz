<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Premier Automotriz</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800"
      rel="stylesheet"
      type="text/css"
    />
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <link href="css/animate.min.css" rel="stylesheet" type="text/css" />

    <!-- Background Slider -->
    <link href="js/vegas/vegas.min.css" rel="stylesheet" type="text/css" />

    <!-- Custom CSS -->
    <link href="css/csoon.css" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
    <!-- Preloader -->
    <div id="preloader"><div id="status">&nbsp;</div></div>

    <div id="nav"></div>

    <!-- Intro Header -->
    <header class="intro">
      <div class="intro-body">
        <img
          src="img/bolsa-trabajo/banner.png"
          alt=""
          class="wow fadeIn"
          data-wow-duration="4s"
          data-wow-delay=".4s"
          style="width: 800px"
        />
        <div
          id="clock"
          class="wow fadeIn"
          data-wow-duration="6s"
          data-wow-delay=".6s"
        ></div>
      </div>
    </header>

    <!-- Contact Section -->
    <section id="contact">
      <div class="container wow fadeIn">
        <div class="row">
          <div class="col-md-5">
            <h2>BOLSA DE TRABAJO</h2>
            <p>Ofrecemos prestaciones muy atractivas superiores a la Ley:</p>
            <ul>
              <li>Gastos médicos mayores</li>
              <li>Fondo de ahorro</li>
              <li>Seguro de vida</li>
              <li>Seguro de gastos funerarios</li>
              <li>
                Descuentos en tiendas departamentales y en empresas con
                convenios.
              </li>
            </ul>
            <!-- <h2><i class="icon ion-android-call"></i> (123) 456-7890</h2>
            <h4>
              <i class="icon ion-android-mail"></i> info@youwebsite.com<br />
              <i class="icon ion-ios-location"></i> 2345 Some Ave, New York, NY
              23458
            </h4> -->
          </div>
          <div class="col-md-5 col-md-offset-2">
            <h2>Sé parte de esta comunidad Gente Premier.</h2>
            <!-- Contact Form - Enter your email address on line 17 of the mail/contact_me.php file to make this form work. -->
            <!-- WARNING: Some web hosts do not allow emails to be sent through forms to common mail hosts like Gmail or Yahoo. It's recommended that you use a private domain email address! -->
            <!-- NOTE: To use the contact form, your site must be on a live web host with PHP! The form will not work locally! -->
            <form name="sentMessage" id="contactForm" novalidate="">
              <div class="control-group">
                <div class="form-group floating-label-form-group controls">
                  <label for="name" class="sr-only control-label">Nombre</label>
                  <input
                    type="text"
                    class="form-control input-lg"
                    placeholder="Nombre"
                    id="name"
                    required=""
                    data-validation-required-message="Please enter name"
                  />
                  <span class="help-block text-danger"></span>
                </div>
              </div>
              <div class="control-group">
                <div class="form-group floating-label-form-group controls">
                  <label for="email" class="sr-only control-label"
                    >Correo Electrónico</label
                  >
                  <input
                    type="email"
                    class="form-control input-lg"
                    placeholder="Correo Electrónico"
                    id="email"
                    required=""
                    data-validation-required-message="Please enter email"
                  />
                  <span class="help-block text-danger"></span>
                </div>
              </div>
              <div class="control-group">
                <div class="form-group floating-label-form-group controls">
                  <label for="phone" class="sr-only control-label"
                    >Teléfono</label
                  >
                  <input
                    type="tel"
                    class="form-control input-lg"
                    placeholder="Teléfono"
                    id="phone"
                    required=""
                    data-validation-required-message="Please enter phone number"
                  />
                  <span class="help-block text-danger"></span>
                </div>
              </div>
              <div class="control-group">
                <div class="form-group floating-label-form-group controls">
                  <label for="message" class="sr-only control-label"
                    >Mensaje</label
                  >
                  <textarea
                    rows="2"
                    class="form-control input-lg"
                    placeholder="Mensaje"
                    id="message"
                    required=""
                    data-validation-required-message="Please enter a message."
                    aria-invalid="false"
                  ></textarea>
                  <span class="help-block text-danger"></span>
                </div>
              </div>
              <div id="success"></div>
              <button type="submit" class="btn btn-dark btn-lg">Enviar</button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <section id="contact2" class="container-fluid text-center wow fadeIn">
      <div class="overlay"></div>
      <div class="row">
        <div class="col-md-3">
          <i class="fa-solid fa-star fa-2x"></i>
        </div>
        <div class="col-md-6">
          <p>&copy; YOUR WEBSITE 2015</p>
        </div>
        <div class="col-md-3">
          <ul class="list-inline">
            <li>
              <a href="/"><i class="fa-brands fa-twitter fa-fw fa-2x"></i></a>
            </li>
            <li>
              <a href="/"><i class="fa-brands fa-facebook fa-fw fa-2x"></i></a>
            </li>
            <li>
              <a href="/"><i class="fa-brands fa-instagram fa-fw fa-2x"></i></a>
            </li>
            <li>
              <a href="/"><i class="fa-solid fa-envelope fa-fw fa-2x"></i></a>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <section id="contact3" class="container-fluid text-center wow fadeIn">
      <div class="container">
        <div class="row">
          <div class="col-lg-10 col-lg-offset-1">
            <h2
              class="font-bebas-neue"
              style="margin-bottom: 30px; color: #333; font-size: 2.5em"
            >
              BOLSA DE TRABAJO PREMIER
            </h2>

            <div
              class="job-portal-container"
              style="
                background: #f8f9fa;
                border-radius: 12px;
                padding: 40px;
                color: #333;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
                margin-bottom: 30px;
                position: relative;
                overflow: hidden;
              "
            >
              <!-- Loading State -->
              <div id="loading-state" style="text-align: center">
                <i
                  class="fa-solid fa-spinner fa-spin fa-3x"
                  style="margin-bottom: 20px; color: #007bff"
                ></i>
                <h3 style="color: #2c3e50">
                  Conectando con la bolsa de trabajo...
                </h3>
                <p style="color: #6c757d">
                  Extrayendo oportunidades laborales en tiempo real
                </p>
              </div>

              <!-- Job Listings Container -->
              <div id="job-listings" style="display: none">
                <h3
                  style="
                    margin-bottom: 30px;
                    font-size: 1.8em;
                    color: #2c3e50;
                    text-align: center;
                  "
                >
                  <i
                    class="fa-solid fa-briefcase"
                    style="margin-right: 10px; color: #007bff"
                  ></i>
                  Oportunidades Disponibles
                </h3>
                <div
                  id="jobs-container"
                  style="
                    max-height: 500px;
                    overflow-y: auto;
                    padding: 0;
                    background: transparent;
                    border-radius: 0;
                  "
                ></div>
              </div>

              <!-- Error State -->
              <div id="error-state" style="display: none; text-align: center">
                <i
                  class="fa-solid fa-exclamation-triangle fa-3x"
                  style="color: #ffc107; margin-bottom: 20px"
                ></i>
                <h3 style="color: #2c3e50">No se pudo conectar</h3>
                <p style="color: #6c757d">
                  Pero puedes visitar directamente nuestro portal de empleo
                </p>
                <a
                  href="https://talentopremier.com"
                  target="_blank"
                  class="btn btn-primary"
                  style="
                    margin-top: 20px;
                    padding: 12px 30px;
                    border-radius: 6px;
                    font-weight: 500;
                    background: #007bff;
                    border: none;
                    color: white;
                    text-decoration: none;
                    transition: all 0.2s ease;
                  "
                  onmouseover="this.style.background='#0056b3'"
                  onmouseout="this.style.background='#007bff'"
                >
                  <i class="fa-solid fa-external-link-alt"></i> Ir al Portal
                </a>
              </div>

              <!-- Success State -->
              <div id="success-state" style="display: none; text-align: center">
                <i
                  class="fa-solid fa-check-circle fa-3x"
                  style="color: #28a745; margin-bottom: 20px"
                ></i>
                <h3 style="color: #2c3e50">¡Información Actualizada!</h3>
                <p style="color: #6c757d">
                  Las oportunidades se actualizan automáticamente
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <style>
      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
        }
      }
    </style>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/device.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/smoothscroll.js"></script>
    <script src="js/form.js"></script>
    <script src="js/jquery.placeholder.min.js"></script>

    <!-- Google Map -->
    <!-- Google Maps API Key - Use your own API key to enable the map feature. More information on the Google Maps API can be found at https://developers.google.com/maps/ -->
    <script
      type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRngKslUGJTlibkQ3FkfTxj3Xss1UlZDA&amp;sensor=false"
    ></script>
    <script src="js/map.js"></script>

    <!-- Background image -->
    <script src="js/vegas/vegas.min.js"></script>
    <script>
      $(document).ready(function () {
        $.get("nav.html", function (data) {
          $("#nav").replaceWith(data);
        });
      });

      $("body").vegas({
        transitionDuration: 2000,
        slides: [{ src: "img/bolsa-trabajo/colaboradores.png" }],
        transition: "swirlRight",
      });
    </script>

    <!-- Custom Theme JavaScript -->
    <script src="js/csoon.js"></script>
    <script>
      // URLs de respaldo incluyendo IPs directas
      const backupUrls = [
        "https://talentopremier.com",
        "https://www.talentopremier.com",
        "https://3.14.237.253",
        "https://18.116.253.248",
        "https://18.119.47.181",
        "http://talentopremier.com",
        "http://www.talentopremier.com",
        "http://3.14.237.253",
        "http://18.116.253.248",
        "http://18.119.47.181",
        // Proxy alternativo (si tienes uno configurado)
        "/proxy/talentopremier",
        "/iframe-proxy?url=https://talentopremier.com",
      ];

      let currentUrlIndex = 0;
      let iframeLoaded = false;

      function iframeLoaded() {
        iframeLoaded = true;
        document.getElementById("loading-spinner").style.display = "none";
        document.getElementById("iframe-error").style.display = "none";
        console.log("✅ Iframe cargado exitosamente");
      }

      function tryNextUrl() {
        currentUrlIndex++;
        const iframe = document.getElementById("job-iframe");
        const statusDiv = document.getElementById("url-status");

        if (currentUrlIndex < backupUrls.length) {
          const currentUrl = backupUrls[currentUrlIndex];
          statusDiv.innerHTML = `Intentando: ${currentUrl}`;
          console.log(`🔄 Probando URL ${currentUrlIndex + 1}: ${currentUrl}`);

          iframe.src = currentUrl;

          // Mostrar error temporalmente mientras carga
          setTimeout(() => {
            if (!iframeLoaded) {
              console.log(`❌ Falló: ${currentUrl}`);
              tryNextUrl();
            }
          }, 3000);
        } else {
          // Todas las URLs fallaron
          console.log("❌ Todas las URLs fallaron");
          document.getElementById("loading-spinner").style.display = "none";
          document.getElementById("iframe-error").style.display = "block";
          statusDiv.innerHTML =
            "El servidor bloquea iframes con X-Frame-Options: DENY. " +
            "Contacta al administrador para cambiar a SAMEORIGIN.";
        }
      }

      // Intentar cargar después de 5 segundos si no carga
      setTimeout(() => {
        if (!iframeLoaded) {
          console.log("⏰ Timeout inicial, probando URLs de respaldo...");
          tryNextUrl();
        }
      }, 5000);

      // Debug: mostrar estado en consola
      console.log("🚀 Sistema de iframe iniciado con URLs de respaldo");
      console.log("⚠️ El servidor tiene X-Frame-Options: DENY configurado");
    </script>

    <script>
      // Sistema de web scraping para bolsa de trabajo
      class JobScraper {
        constructor() {
          this.jobs = [];
          this.isLoading = true;
          this.init();
        }

        async init() {
          try {
            await this.fetchJobs();
            this.displayJobs();
          } catch (error) {
            console.error("Error al obtener trabajos:", error);
            this.showError();
          }
        }

        async fetchJobs() {
          // Simular diferentes métodos de obtención de datos
          const methods = [
            this.fetchFromAPI(),
            this.fetchFromHTML(),
            this.fetchFromJSON(),
            this.getMockData(), // Fallback con datos de ejemplo
          ];

          for (const method of methods) {
            try {
              const result = await method;
              if (result && result.length > 0) {
                this.jobs = result;
                return;
              }
            } catch (error) {
              console.log("Método falló, probando siguiente...");
            }
          }

          throw new Error("No se pudieron obtener datos");
        }

        async fetchFromAPI() {
          // Intentar obtener desde API si existe
          const response = await fetch("https://talentopremier.com/api/jobs", {
            method: "GET",
            headers: {
              Accept: "application/json",
              "Content-Type": "application/json",
            },
          });

          if (response.ok) {
            return await response.json();
          }
          throw new Error("API no disponible");
        }

        async fetchFromHTML() {
          // Intentar hacer scraping del HTML
          const response = await fetch("https://talentopremier.com", {
            method: "GET",
            headers: {
              "User-Agent": "Mozilla/5.0 (compatible; JobScraper/1.0)",
            },
          });

          if (response.ok) {
            const html = await response.text();
            return this.parseHTML(html);
          }
          throw new Error("HTML no accesible");
        }

        parseHTML(html) {
          // Parsear HTML para extraer trabajos reales
          const jobs = [];

          // Buscar patrones específicos de la página de talentopremier.com
          const patterns = [
            // Buscar elementos de trabajo con estructura específica
            /<div[^>]*class="[^"]*job[^"]*"[^>]*>([\s\S]*?)<\/div>/gi,
            /<div[^>]*class="[^"]*position[^"]*"[^>]*>([\s\S]*?)<\/div>/gi,
            /<div[^>]*class="[^"]*career[^"]*"[^>]*>([\s\S]*?)<\/div>/gi,
            // Buscar elementos con botón "Postularme"
            /<div[^>]*>([\s\S]*?Postularme[\s\S]*?)<\/div>/gi,
            // Buscar cualquier div que contenga información de trabajo
            /<div[^>]*>([\s\S]*?)(?:Culiacán|Los Mochis|Todas las ciudades)[\s\S]*?<\/div>/gi,
          ];

          for (const pattern of patterns) {
            const matches = html.match(pattern);
            if (matches) {
              matches.forEach((match) => {
                const job = this.extractJobInfo(match);
                if (job.title && !jobs.find((j) => j.title === job.title)) {
                  jobs.push(job);
                }
              });
            }
          }

          // Si no se encontraron trabajos, intentar extraer del texto completo
          if (jobs.length === 0) {
            const jobTitles = [
              "Prácticas Profesionales",
              "Responding",
              "Asesor(a) de ventas",
              "Jefe de taller",
              "Anfitriona/Hostess",
              "Facturista",
              "Lavador de autos",
              "Asesor(a) de servicio",
              "Auxiliar contable",
            ];

            jobTitles.forEach((title, index) => {
              if (html.includes(title)) {
                const locations = [
                  "Todas las ciudades",
                  "Culiacán",
                  "Los Mochis",
                ];
                const location = locations[index % locations.length];

                jobs.push({
                  title: title,
                  location: location,
                  type: "Tiempo Completo",
                  company: "Premier Automotriz",
                  posted: "Reciente",
                  applyUrl: "https://talentopremier.com",
                });
              }
            });
          }

          return jobs;
        }

        extractJobInfo(html) {
          // Extraer información del trabajo del HTML
          const titleMatch =
            html.match(/<h[1-6][^>]*>([^<]+)<\/h[1-6]>/i) ||
            html.match(
              /(?:Prácticas Profesionales|Responding|Asesor\(a\) de ventas|Jefe de taller|Anfitriona\/Hostess|Facturista|Lavador de autos|Asesor\(a\) de servicio|Auxiliar contable)/i
            );

          const locationMatch = html.match(
            /(?:Culiacán|Los Mochis|Todas las ciudades)/i
          );

          return {
            title: titleMatch
              ? titleMatch[1] || titleMatch[0]
              : "Posición Disponible",
            location: locationMatch ? locationMatch[0] : "México",
            type: "Tiempo Completo",
            company: "Premier Automotriz",
            posted: "Reciente",
            applyUrl: "https://talentopremier.com",
          };
        }

        getMockData() {
          // Datos reales basados en la bolsa de trabajo actual
          return [
            {
              title: "Prácticas Profesionales",
              location: "Todas las ciudades",
              type: "Prácticas",
              company: "Grupo Premier",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Responding",
              location: "Culiacán",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Asesor(a) de ventas",
              location: "Los Mochis",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Jefe de taller",
              location: "Los Mochis",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Anfitriona/Hostess",
              location: "Culiacán",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Facturista",
              location: "Culiacán",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Asesor(a) de ventas",
              location: "Culiacán",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Lavador de autos",
              location: "Culiacán",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Asesor(a) de servicio",
              location: "Culiacán",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
            {
              title: "Auxiliar contable",
              location: "Culiacán",
              type: "Tiempo Completo",
              company: "Premier Automotriz",
              posted: "Reciente",
              applyUrl: "https://talentopremier.com",
            },
          ];
        }

        displayJobs() {
          const container = document.getElementById("jobs-container");
          const loadingState = document.getElementById("loading-state");
          const jobListings = document.getElementById("job-listings");
          const successState = document.getElementById("success-state");

          // Ocultar loading
          loadingState.style.display = "none";

          // Mostrar trabajos
          jobListings.style.display = "block";

          // Crear HTML para cada trabajo con diseño limpio
          const jobsHTML = this.jobs
            .map(
              (job) => `
              <div class="job-item" style="
                background: white;
                border-radius: 8px;
                padding: 24px;
                margin-bottom: 16px;
                border: 1px solid #e9ecef;
                transition: all 0.2s ease;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
              " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 1px 3px rgba(0,0,0,0.1)'">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div style="flex: 1;">
                    <h4 style="margin: 0 0 8px 0; font-size: 1.1em; font-weight: 600; color: #2c3e50;">
                      ${job.title}
                    </h4>
                    <p style="margin: 0; color: #6c757d; font-size: 0.9em;">
                      <i class="fa-solid fa-map-marker-alt" style="margin-right: 6px; color: #007bff;"></i> 
                      ${job.location}
                    </p>
                  </div>
                  <div style="margin-left: 20px;">
                    <a href="${job.applyUrl}" target="_blank" class="btn btn-primary" style="
                      padding: 10px 24px;
                      border-radius: 6px;
                      font-weight: 500;
                      font-size: 0.9em;
                      background: #007bff;
                      border: none;
                      color: white;
                      text-decoration: none;
                      transition: all 0.2s ease;
                    " onmouseover="this.style.background='#0056b3'" onmouseout="this.style.background='#007bff'">
                      Postularme
                    </a>
                  </div>
                </div>
              </div>
            `
            )
            .join("");

          container.innerHTML = jobsHTML;

          // Mostrar mensaje de éxito
          setTimeout(() => {
            successState.style.display = "block";
          }, 1000);
        }

        showError() {
          const loadingState = document.getElementById("loading-state");
          const errorState = document.getElementById("error-state");

          loadingState.style.display = "none";
          errorState.style.display = "block";
        }
      }

      // Inicializar el scraper cuando la página cargue
      document.addEventListener("DOMContentLoaded", () => {
        new JobScraper();
      });
    </script>
  </body>
</html>
